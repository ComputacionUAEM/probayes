/*=============================================================================
 * Product        : ProBT 
 * File           : RedBayesiana.cpp
 * Author         : Esau Escobar
 * Creation       : Lun Abr 23 14:41:15 2012
 *
 *=============================================================================
 *        (c) Copyright 2012  -  all rights reserved
 *=============================================================================
*/

#include <pl.h>
#include <iostream>
using namespace std;

int main() 
{
  /**********************************************************************
   VARIABLES SPECIFICATION
  **********************************************************************/
  plIntegerType t_rank(40,150);      //El rango de Z es de 40cm a 1.5mts
  plIntegerType vt_rank(0,28);       //28 posibles combinaciones de
                                     //  Velocidad * Tiempo
  plSymbol sent("tiempo_t",t_rank); //Espacio de Situacion Sensorial t
  plSymbol sent1("tiempo_t1",t_rank); //Situacion Sensorial t+1
  plSymbol vt("vxt",vt_rank);

  plValues result(sentt^sentt1^vt);

  /**********************************************************************
   PARAMETRIC FORM SPECIFICATION
  **********************************************************************/
  //P(sent) = uniform(sent)
  plUniform p_sent(sent);

  //P(sent1) = uniform(sent1)
  plUniform p_sent1(sent1);

  //Funciones externas para computar la media y la desv.est.
  plExternalFunction f_mu(sent,sent1,f_mean);
  plExternalFunction f_sd(sent,sent1,f_std);

  //P(vt | t,t1)=CndBellShape(t,t1,f_mu(st,st1),f_sd(st,st1))
  plCndBellShape p_vt(vt,sent^sent1,f_mu,f_sd);
  
  /**********************************************************************
   DECOMPOSITION
  **********************************************************************/
  //P(vt sent sent1) = P(vt | sent sent1)P(sent)P(sent1)
  plJointDistribution jd(sent^sent1^vt, p_sent*p_sent1*p_vt);
  jd.draw_graph("red_bayesiana.fig");
  cout<<"OK\n";
  /**********************************************************************
   PROGRAM QUESTION
  **********************************************************************/
  
  return 0;
}
